sample:
  description: ZSAI usage sample
    application
  name: ZSAI sample
common:
  tags: introduction storage zsai
tests:
  storage.zai.with_erase:
    extra_args:
      - DTC_OVERLAY_FILE=zsai_with_erase.overlay
      - OVERLAY_CONFIG=zsai_simulator.conf
    platform_allow: qemu_x86 native_posix
    integration_platforms:
      - native_posix
    harness: console
    harness_config:
      type: multi_line
      regex:
        - "Starting ZSAI sample on *"
        - "Device uses write block size 1"
        - "Device has size 65536"
        - "Device requires erase prior to write"
        - "For offset 65496, got page with offset 61440 and size 4096"
        - "Erase was ok"
        - "Writing DATA to device"
        - "Reading device back to buffer"
        - "Data and buffer matches"
  storage.zsai.without_erase:
    extra_args:
      - DTC_OVERLAY_FILE=zsai_without_erase.overlay
      - OVERLAY_CONFIG=zsai_simulator.conf
    platform_allow: qemu_x86 native_posix
    integration_platforms:
      - native_posix
    harness: console
    harness_config:
      type: multi_line
      regex:
        - "Starting ZSAI sample on *"
        - "Device uses write block size 4"
        - "Device has size 65536"
        - "Writing DATA to device"
        - "Reading device back to buffer"
        - "Data and buffer matches"
  storage.zsai.nrf:
    extra_args: OVERLAY_CONFIG=boards/nrf52840dk_nrf52840.conf
    platform_allow: nrf52840dk_nrf52840
    integration_platforms:
      - nrf52840dk_nrf52840
